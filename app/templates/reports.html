{% extends "base.html" %}

{% block title %}Reports - RDL Report Viewer{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">Reports</h1>
    <div class="page-actions">
        <div class="search-box">
            <span class="search-icon">ğŸ”</span>
            <input type="text" id="searchInput" class="search-input" placeholder="Search reports...">
        </div>
        <button class="btn btn-secondary" id="scanBtn">
            ğŸ”„ Scan Folder
        </button>
        <button class="btn btn-primary" onclick="openModal('uploadModal')">
            ğŸ“¤ Upload RDL
        </button>
    </div>
</div>

<div id="reportsContainer">
    <div class="empty-state">
        <div class="empty-state-icon">ğŸ“Š</div>
        <div class="empty-state-title">No reports found</div>
        <div class="empty-state-text">Upload RDL files or scan the reports folder to get started.</div>
    </div>
</div>

<!-- Upload Modal -->
<div class="modal-overlay" id="uploadModal">
    <div class="modal">
        <div class="modal-header">
            <h3 class="modal-title">Upload RDL Report</h3>
            <button class="modal-close" onclick="closeModal('uploadModal')">&times;</button>
        </div>
        <div class="modal-body">
            <form id="uploadForm">
                <div class="form-group">
                    <label class="form-label">RDL File</label>
                    <div class="file-upload-area" id="dropZone">
                        <input type="file" id="fileInput" accept=".rdl" style="display: none;" multiple>
                        <div class="file-upload-icon">ğŸ“</div>
                        <div class="file-upload-text">Drag & drop RDL files here or click to browse</div>
                        <div class="file-upload-hint">Only .rdl files are accepted</div>
                    </div>
                    <div id="fileList" class="file-list"></div>
                </div>
                <div class="form-group">
                    <label class="form-label">Folder (optional)</label>
                    <input type="text" class="form-input" id="uploadFolder" placeholder="e.g., Inventory">
                    <small class="text-secondary">Organize reports into folders</small>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal('uploadModal')">Cancel</button>
            <button class="btn btn-primary" id="uploadBtn" onclick="uploadFiles()" disabled>Upload</button>
        </div>
    </div>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal-overlay" id="deleteModal">
    <div class="modal" style="max-width: 400px;">
        <div class="modal-header">
            <h3 class="modal-title">Delete Report</h3>
            <button class="modal-close" onclick="closeModal('deleteModal')">&times;</button>
        </div>
        <div class="modal-body">
            <p>Are you sure you want to delete <strong id="deleteReportName"></strong>?</p>
            <p class="text-secondary">This will remove both the report file and its metadata.</p>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal('deleteModal')">Cancel</button>
            <button class="btn btn-danger" id="confirmDeleteBtn" onclick="confirmDelete()">Delete</button>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/reports.js') }}"></script>
{% endblock %}
